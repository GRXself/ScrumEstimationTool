@model object

@{
    ViewBag.Title = "Scrum Estimation Tool: Participant";
    Layout = "_Layout";
}

<script type="text/javascript">
    window.onload = LoadRoomInfo;

    function SubmitEstimation() {
        if (IsRoomIdEmpty()) {
            return;
        }
        
        const participantName = $('#participant-name');
        const participantEstimation = $('#participant-estimation');
            if (participantName.val().trim().length === 0 || participantEstimation.text().trim().length === 0)
            {
                alert("Please give your name and estimation!");
            }
            else
            {
            $.ajax({
                url: '@Url.Action("SubmitEstimationPoint", "Participant")',
                type: 'POST',
                data: {
                    Name: participantName.val(),
                    PersonalEstimation: participantEstimation.text(),
                },
                success: function(data) {
                    if (data.expired === true) {
                        alert("Room not exist! Please reenter a room!")
                    }
                    else{
                        alert("Submit Success");
                    }
                }
            })
        }
    }
    
    function SetEstimationOnClick(pokerCard) {
      $('#participant-estimation').text($(pokerCard).text());
    }
</script>

<style>
.poker-card-container {
  float:left;
  padding: 30px;
}
.poker-card {
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
  background-color: #8ec6b5;
  transition: 0.3s;
  
  width: 130px;
  padding: 70px 50px;
  
  text-align: center;
  font-size: 20px;
}
.poker-card:hover {
  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}
</style>

<h2>Participant</h2>

<div>
  Current room id:
  <p id="roomId-show"></p>
</div>

<div>
    Click the card below giving a quick estimation:
</div>
<div width="100%">
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">1</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">2</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">3</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">5</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">8</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">666</div>
    </div>
    <div class="poker-card-container">
        <div class="poker-card" onclick="SetEstimationOnClick(this)">0</div>
    </div>
</div>

<div style="clear:both;"></div>

<div>
    <form>
        Your Name: 
        <input id="participant-name" type="text"/> <br/>
        Your Current Estimation:
        <text id="participant-estimation">1</text>
    </form>
</div>

<div align="center">
    <input type="button" onclick="SubmitEstimation()" value="Submit"/>
</div>
